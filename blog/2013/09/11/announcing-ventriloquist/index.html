<!doctype html><html xmlns=http://www.w3.org/1999/xhtml><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Announcing Ventriloquist | fabiorehm.com</title><meta property="og:title" content="Announcing Ventriloquist - fabiorehm.com"><meta property="og:description" content="Development environments made easy"><meta property="og:url" content="https://fabiorehm.com/blog/2013/09/11/announcing-ventriloquist/"><meta property="og:site_name" content="fabiorehm.com"><meta property="og:type" content="article"><meta property="og:image" content="https://www.gravatar.com/avatar/2b78c6da27ec7e1419eebc8b683c25a3?s=256"><meta property="article:section" content="Blog"><meta property="article:tag" content="vagrant"><meta property="article:tag" content="docker"><meta property="article:tag" content="devops"><meta property="article:tag" content="puppet"><meta property="article:tag" content="provisioning"><meta property="article:tag" content="lxc"><meta property="article:published_time" content="2013-09-11T00:00:00Z"><meta property="article:modified_time" content="2013-09-11T00:00:00Z"><meta name=twitter:card content="summary"><meta name=twitter:site content="@fgrehm"><meta name=twitter:creator content="@fgrehm"><link href=https://fabiorehm.com/index.xml rel=alternate type=application/rss+xml title=fabiorehm.com><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://fabiorehm.com/css/site.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://fabiorehm.com/blog/2013/09/11/announcing-ventriloquist/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><section class=section><div class=container><nav id=nav-main class=nav><div id=nav-name class=nav-left><a id=nav-anchor class=nav-item href=https://fabiorehm.com/><h1 id=nav-heading class="title is-4">fabiorehm.com</h1></a></div><div class=nav-right><nav id=nav-items class="nav-item level is-mobile"><a class=level-item aria-label=email href=mailto:site@fabiorehm.com target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></i></span></a><a class=level-item aria-label=github href=https://github.com/fgrehm target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></i></span></a><a class=level-item aria-label=twitter href=https://twitter.com/fgrehm target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></i></span></a><a class=level-item aria-label=linkedin href=https://linkedin.com/in/fgrehm target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path stroke-width="1.8" d="m5.839218 4.101561c0 1.211972-.974141 2.194011-2.176459 2.194011S1.4863 5.313533 1.4863 4.101561c0-1.211094.974141-2.194011 2.176459-2.194011s2.176459.982917 2.176459 2.194011zm.017552 3.94922H1.468748v14.04167H5.85677V8.050781zm7.005038.0H8.501869v14.04167h4.360816v-7.370999c0-4.098413 5.291077-4.433657 5.291077.0v7.370999h4.377491v-8.89101c0-6.915523-7.829986-6.66365-9.669445-3.259423V8.050781z"/></svg></i></span></a><a class=level-item aria-label=rss href=/index.xml target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></i></span></a></nav></div></nav><nav class=nav></nav></div><script src=/js/navicon-shift.js></script></section><section class=section><div class=container><div class="subtitle tags is-6 is-pulled-right"><a class="subtitle is-6" href=/tags/vagrant/>#vagrant</a>
| <a class="subtitle is-6" href=/tags/docker/>#docker</a>
| <a class="subtitle is-6" href=/tags/devops/>#devops</a>
| <a class="subtitle is-6" href=/tags/puppet/>#puppet</a>
| <a class="subtitle is-6" href=/tags/provisioning/>#provisioning</a>
| <a class="subtitle is-6" href=/tags/lxc/>#lxc</a></div><h2 class="subtitle is-6">September 11, 2013</h2><h1 class=title>Announcing Ventriloquist</h1><div class=content><p>Although I&rsquo;ve been writing about and working on a lot of Vagrant related stuff
lately, I need to say that I&rsquo;m not a &ldquo;DevOps guy&rdquo;. My day to day job still consists
of building web apps using Ruby On Rails and even though I like using Puppet (and
recently Chef), my daily work does not involve any sort of machine configuration
management.</p><p>Configuring a Vagrant development environment is not an easy task. As an example,
the &ldquo;default stack&rdquo; of the Rails apps I&rsquo;ve been working on consists on <a href=https://github.com/fgrehm/rails-base-box#vagrant-12-base-box-for-working-with-rails>quite a few components</a>
and getting the provisioning scripts / manifests / recipes right is not a trivial
task for many people (myself included). I know there are a lot of modules /
cookbooks available out there but in my opinion having to know that they exist
and learning how to wire them up together shouldn&rsquo;t be a <em>requirement</em> for
<strong>developers</strong>.</p><p>Projects like <a href=https://puphpet.com/>PuPHPet</a> and <a href=http://vmg.slynett.com/>Web VM Generator</a>
are available to make that initial bootstrap easier for PHP projects but at the
end they both spit out a set of Puppet manifests. While I like the idea, it still
&ldquo;forces&rdquo; users to learn Puppet to make changes to the VM or go through the process of
clicking checkboxes and filling in text inputs to build a new set of manifests with
the new configs.</p><p>Inspired by both <a href=http://railswizard.org/>Rails Wizard</a> and GitHub&rsquo;s <a href=http://boxen.github.com/>Boxen</a>,
earlier this year I started a project called <a href=https://github.com/fgrehm/vagrant-boxen>vagrant-boxen</a>
that followed the same approach as PuPHPet or Web VM Generator but without the UI.
My idea was to use a set of pre-defined Puppet modules to allow users to configure
the VMs from within the Vagrantfile with less pain.</p><p>Since then the idea has evolved into a new tool I have just open sourced called
<a href=https://github.com/fgrehm/ventriloquist>Ventriloquist</a> that combines <a href=http://www.vagrantup.com/>Vagrant</a>
and <a href=http://www.docker.io/>Docker</a> to give <strong>developers</strong> the ability to configure
portable and disposable development VMs with ease. It follows vagrant-boxen
approach of configuring things from Vagrantfiles and it attempts to lower the
entry barrier of building a sane working environment without having to worry about
provisioning tools.</p><h2 id=project-goals>Project Goals
<a href=#project-goals><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-link" viewBox="0 0 16 16"><path d="M6.354 5.5H4a3 3 0 000 6h3a3 3 0 002.83-4H9c-.086.0-.17.01-.25.031A2 2 0 017 10.5H4a2 2 0 110-4h1.535c.218-.376.495-.714.82-1z"/><path d="M9 5.5a3 3 0 00-2.83 4h1.098A2 2 0 019 6.5h3a2 2 0 110 4h-1.535a4.02 4.02.0 01-.82 1H12a3 3 0 100-6H9z"/></svg></a></h2><p>As stated on the <a href=https://github.com/fgrehm/ventriloquist#project-goals>README</a>,
the idea is to build a tool that supports creating multi purpose, &ldquo;zero-conf&rdquo;
development environments that fits into a gist. It also aims to be the easiest
way to build other tools development environments and to be a learning
playground, making it easy to learn new programming languages / tools.</p><p>This may sound weird for some people but Ventriloquist can help you achieve
&ldquo;Production Parity&rdquo; if you don&rsquo;t have control of your production environment
(like if you are deploying to Heroku or another PaaS) or have a complex setup
in place (involving load balancers, multiple database servers and the like).
IMHO it doesn&rsquo;t make sense to replicate <strong>ALL</strong> of the aspects of your
production environment during development and using the same distro / tools
version as you&rsquo;ll have available over there is usually enough. Not to say that
if you use Docker in production, you might as well try to use the same services
images during development and stay closer to your production environment.</p><h2 id=how-does-it-look-like>How does it look like?
<a href=#how-does-it-look-like><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-link" viewBox="0 0 16 16"><path d="M6.354 5.5H4a3 3 0 000 6h3a3 3 0 002.83-4H9c-.086.0-.17.01-.25.031A2 2 0 017 10.5H4a2 2 0 110-4h1.535c.218-.376.495-.714.82-1z"/><path d="M9 5.5a3 3 0 00-2.83 4h1.098A2 2 0 019 6.5h3a2 2 0 110 4h-1.535a4.02 4.02.0 01-.82 1H12a3 3 0 100-6H9z"/></svg></a></h2><p>To give you an idea, this is what it takes to configure a Vagrant VM ready
for development on <a href=http://www.discourse.org/>Discourse</a> (and probably a whole
lot of other Ruby On Rails apps):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#66d9ef>Vagrant</span><span style=color:#f92672>.</span>configure(<span style=color:#e6db74>&#34;2&#34;</span>) <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>config<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># ... your other Vagrant configs ...</span>
</span></span><span style=display:flex><span>  config<span style=color:#f92672>.</span>vm<span style=color:#f92672>.</span>provision <span style=color:#e6db74>:ventriloquist</span> <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>env<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>    env<span style=color:#f92672>.</span>services  <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>%w( redis pg:9.1 )</span>
</span></span><span style=display:flex><span>    env<span style=color:#f92672>.</span>platforms <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>%w( nodejs ruby:1.9.3 )</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span></span></span></code></pre></div><p>As another example, <a href=https://github.com/fgrehm/rails-base-box/commit/69021b08dab0ff9ed78a17b16344d207dafb045c#L0L78>this</a>
is what I ended up removing from my own <a href=https://github.com/fgrehm/rails-base-box>rails-base-box</a>
Puppet manifest after introducing the plugin. Since most of the work is being
handled by Ventriloquist, I&rsquo;ve replaced all of the Puppet <a href=https://github.com/fgrehm/rails-base-box/blob/689494009a4fd1955a6b8564d886bbb3e8ed7a80/Puppetfile>modules dependencies</a>
I needed with <a href=https://github.com/fgrehm/rails-base-box/blob/84fc7649163fb19f2ea4f552420962bd630f8290/Vagrantfile#L32-L35>4 lines of code</a>
on my Vagrantfile. I&rsquo;m still dealing with some pretty basic stuff <a href=https://github.com/fgrehm/rails-base-box/blob/84fc7649163fb19f2ea4f552420962bd630f8290/site.pp>using puppet</a>
but I&rsquo;m planing to swap it with a bash script that has even less lines of code
to keep things simpler and leverage provisionerless base Vagrant boxes.</p><h2 id=as-with-other-stuff-ive-built-recently-its-just-a-start>As with other stuff I&rsquo;ve built recently, it&rsquo;s just a start
<a href=#as-with-other-stuff-ive-built-recently-its-just-a-start><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-link" viewBox="0 0 16 16"><path d="M6.354 5.5H4a3 3 0 000 6h3a3 3 0 002.83-4H9c-.086.0-.17.01-.25.031A2 2 0 017 10.5H4a2 2 0 110-4h1.535c.218-.376.495-.714.82-1z"/><path d="M9 5.5a3 3 0 00-2.83 4h1.098A2 2 0 019 6.5h3a2 2 0 110 4h-1.535a4.02 4.02.0 01-.82 1H12a3 3 0 100-6H9z"/></svg></a></h2><p>There are a lot of things that needs to be improved and you can find some ideas
on the project&rsquo;s <a href=https://github.com/fgrehm/ventriloquist#ideas-for-improvements>README</a>.</p><p>For now I&rsquo;ll continue to do some more testing and will start looking into adding
support for other languages as I have the need. If you have a need for an unsupported
platform or service, feel free to open up an issue or a Pull Request on GitHub.</p><p>I would also love to know any kind of feedback you might have about the tool.
If you are feeling specially charitable, share this post on Twitter / star the
project on GitHub or drop by a comment. Oh, and don&rsquo;t hesitate to throw some
tomatoes as well if you think I deserve :P</p><p><em><strong>UPDATE</strong> (26 AUG 2014): I&rsquo;ve stepped down as a maintainer of the plugin, feel
free to <a href=https://github.com/fgrehm/ventriloquist/issues/63>reach out in case you want to take over responsibility for the project</a></em></p><div class=related><h3>Similar articles:</h3><ul><li><a href=/blog/2013/07/18/crafting-your-own-vagrant-lxc-base-box/>Crafting your own vagrant-lxc base box</a></li><li><a href=/blog/2013/06/10/improving-vagrant-lxc-boxes/>Improving vagrant-lxc boxes</a></li><li><a href=/blog/2013/04/28/lxc-provider-for-vagrant/>LXC provider for Vagrant</a></li><li><a href=/blog/2013/08/07/vagrant-lxc-0-5-0-and-beyond/>vagrant-lxc 0.5.0 and beyond</a></li><li><a href=/blog/2013/07/23/vundler-is-now-bindler/>Vundler is now Bindler!</a></li></ul></div></div></div></section><script src=/js/copycode.js></script><section class=section><div class=container><aside><div id=disqus_thread></div></aside><div id=show_comments><a id=load_comments class="button is-link">Load comments</a></div><script type=text/javascript>var disqus_shortname="fgrehm",hash;function disqus(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}hash=window.location.hash.substr(1),hash.length>8&&hash.substring(0,8)==="comment-"?(disqus(),document.getElementById("show_comments").style.display="none"):document.getElementById("load_comments").onclick=function(){disqus(),document.getElementById("show_comments").style.display="none"}</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></section><section class=section><div class="container has-text-centered"><p>&copy; <a href=https://github.com/fgrehm>Fabio Rehm</a> 2013-2022</p><p>Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/ribice/kiss>Kiss</a>.</p></div></section><script async src="https://www.googletagmanager.com/gtag/js?id=G-Z78MGSF72P"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Z78MGSF72P",{anonymize_ip:!1})}</script></body></html>