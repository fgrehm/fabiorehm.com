<!doctype html><html xmlns=http://www.w3.org/1999/xhtml><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Running GUI apps with Docker | fabiorehm.com</title><meta property="og:title" content="Running GUI apps with Docker - fabiorehm.com"><meta property="og:description" content="I've been doing all of my real (paid) work on VMs / containers for a while now but when it comes to writing Java code..."><meta property="og:url" content="https://fabiorehm.com/blog/2014/09/11/running-gui-apps-with-docker/"><meta property="og:site_name" content="fabiorehm.com"><meta property="og:type" content="article"><meta property="og:image" content="https://www.gravatar.com/avatar/2b78c6da27ec7e1419eebc8b683c25a3?s=256"><meta property="article:section" content="Blog"><meta property="article:tag" content="docker"><meta property="article:tag" content="x11"><meta property="article:tag" content="firefox"><meta property="article:tag" content="netbeans"><meta property="article:tag" content="java"><meta property="article:published_time" content="2014-09-11T00:00:00Z"><meta property="article:modified_time" content="2014-09-11T00:00:00Z"><meta name=twitter:card content="summary"><meta name=twitter:site content="@fgrehm"><meta name=twitter:creator content="@fgrehm"><link href=https://fabiorehm.com/index.xml rel=alternate type=application/rss+xml title=fabiorehm.com><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://fabiorehm.com/css/site.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://fabiorehm.com/blog/2014/09/11/running-gui-apps-with-docker/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><section class=section><div class=container><nav id=nav-main class=nav><div id=nav-name class=nav-left><a id=nav-anchor class=nav-item href=https://fabiorehm.com/><h1 id=nav-heading class="title is-4">fabiorehm.com</h1></a></div><div class=nav-right><nav id=nav-items class="nav-item level is-mobile"><a class=level-item aria-label=email href=mailto:site@fabiorehm.com target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></i></span></a><a class=level-item aria-label=github href=https://github.com/fgrehm target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></i></span></a><a class=level-item aria-label=twitter href=https://twitter.com/fgrehm target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></i></span></a><a class=level-item aria-label=linkedin href=https://linkedin.com/in/fgrehm target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path stroke-width="1.8" d="m5.839218 4.101561c0 1.211972-.974141 2.194011-2.176459 2.194011S1.4863 5.313533 1.4863 4.101561c0-1.211094.974141-2.194011 2.176459-2.194011s2.176459.982917 2.176459 2.194011zm.017552 3.94922H1.468748v14.04167H5.85677V8.050781zm7.005038.0H8.501869v14.04167h4.360816v-7.370999c0-4.098413 5.291077-4.433657 5.291077.0v7.370999h4.377491v-8.89101c0-6.915523-7.829986-6.66365-9.669445-3.259423V8.050781z"/></svg></i></span></a><a class=level-item aria-label=rss href=/index.xml target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></i></span></a></nav></div></nav><nav class=nav></nav></div><script src=/js/navicon-shift.js></script></section><section class=section><div class=container><div class="subtitle tags is-6 is-pulled-right"><a class="subtitle is-6" href=/tags/docker/>#docker</a>
| <a class="subtitle is-6" href=/tags/x11/>#x11</a>
| <a class="subtitle is-6" href=/tags/firefox/>#firefox</a>
| <a class="subtitle is-6" href=/tags/netbeans/>#netbeans</a>
| <a class="subtitle is-6" href=/tags/java/>#java</a></div><h2 class="subtitle is-6">September 11, 2014</h2><h1 class=title>Running GUI apps with Docker</h1><div class=content><p>I&rsquo;ve been doing all of my real (paid) work on VMs / containers for a while now but when it comes to writing Java code for some projects for university I still
need to move away from using vim and install some full blown IDE in order to be
productive. This has been bothering me for quite some time but this week I
was finally able put the pieces together to run NetBeans in a Docker container so that I can avoid
installing a lot of Java stuff on my machine that I don&rsquo;t use on a daily basis.</p><p>There are a few different options to run GUI applications inside a Docker
container like using <a href=http://blog.docker.com/2013/07/docker-desktop-your-desktop-over-ssh-running-inside-of-a-docker-container/>SSH with X11 forwarding</a>,
or <a href=http://stackoverflow.com/a/16311264>VNC</a> but the simplest one that I
figured out was to share my X11 socket with the container and use it directly.</p><p>The idea is pretty simple and you can easily it give a try by running a Firefox
container using the following <code>Dockerfile</code> as a starting point:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> ubuntu:14.04</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> apt-get update <span style=color:#f92672>&amp;&amp;</span> apt-get install -y firefox<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Replace 1000 with your user / group id</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> export uid<span style=color:#f92672>=</span><span style=color:#ae81ff>1000</span> gid<span style=color:#f92672>=</span><span style=color:#ae81ff>1000</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    mkdir -p /home/developer <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    echo <span style=color:#e6db74>&#34;developer❌</span><span style=color:#e6db74>${</span>uid<span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span>gid<span style=color:#e6db74>}</span><span style=color:#e6db74>:Developer,,,:/home/developer:/bin/bash&#34;</span> &gt;&gt; /etc/passwd <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    echo <span style=color:#e6db74>&#34;developer❌</span><span style=color:#e6db74>${</span>uid<span style=color:#e6db74>}</span><span style=color:#e6db74>:&#34;</span> &gt;&gt; /etc/group <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    echo <span style=color:#e6db74>&#34;developer ALL=(ALL) NOPASSWD: ALL&#34;</span> &gt; /etc/sudoers.d/developer <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    chmod <span style=color:#ae81ff>0440</span> /etc/sudoers.d/developer <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    chown <span style=color:#e6db74>${</span>uid<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>gid<span style=color:#e6db74>}</span> -R /home/developer<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>USER</span><span style=color:#e6db74> developer</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> HOME /home/developer<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> /usr/bin/firefox<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p><code>docker build -t firefox .</code> it and run the container with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -ti --rm <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>       -e DISPLAY<span style=color:#f92672>=</span>$DISPLAY <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>       -v /tmp/.X11-unix:/tmp/.X11-unix <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>       firefox
</span></span></code></pre></div><p>If all goes well you should see Firefox running from within a Docker container.</p><p><img src=firefox-demo.gif#c alt="Firefox Demo"></p><h2 id=getting-a-netbeans-container-up-and-running>Getting a NetBeans container up and running
<a href=#getting-a-netbeans-container-up-and-running><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-link" viewBox="0 0 16 16"><path d="M6.354 5.5H4a3 3 0 000 6h3a3 3 0 002.83-4H9c-.086.0-.17.01-.25.031A2 2 0 017 10.5H4a2 2 0 110-4h1.535c.218-.376.495-.714.82-1z"/><path d="M9 5.5a3 3 0 00-2.83 4h1.098A2 2 0 019 6.5h3a2 2 0 110 4h-1.535a4.02 4.02.0 01-.82 1H12a3 3 0 100-6H9z"/></svg></a></h2><p>Preparing a NetBeans base image was not that straightforward since we need to
install some additional dependencies (namely the <code>libxext-dev</code>, <code>libxrender-dev</code>
and <code>libxtst-dev</code> packages) in order to get it to connect to the X11 socket
properly. I also had trouble using OpenJDK and had to switch to Oracle&rsquo;s Java
for it to work.</p><p>After lots of trial and error, I was finally able to make it work and the result
is a base image available at the <a href=https://registry.hub.docker.com/u/fgrehm/netbeans/>Docker Hub</a>
with sources on <a href=https://github.com/fgrehm/docker-netbeans>GitHub</a>.</p><p>Here&rsquo;s a quick demo of it in action:</p><p><img src=netbeans-demo.gif#c alt="Netbeans Demo"></p><h2 id=future-work>Future work
<a href=#future-work><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-link" viewBox="0 0 16 16"><path d="M6.354 5.5H4a3 3 0 000 6h3a3 3 0 002.83-4H9c-.086.0-.17.01-.25.031A2 2 0 017 10.5H4a2 2 0 110-4h1.535c.218-.376.495-.714.82-1z"/><path d="M9 5.5a3 3 0 00-2.83 4h1.098A2 2 0 019 6.5h3a2 2 0 110 4h-1.535a4.02 4.02.0 01-.82 1H12a3 3 0 100-6H9z"/></svg></a></h2><p>Over the next few months I&rsquo;ll be working on a <a href=https://www.playframework.com/>Play!</a>
app and will hopefully write a blog post on the workflow I used. Stay tunned for more :)</p><hr><p><em>PS: This approach of sharing the X11 socket also be applied to <a href=https://github.com/fgrehm/vagrant-lxc>vagrant-lxc</a>
containers and I&rsquo;ll document that on the project&rsquo;s Wiki when I
have a chance.</em></p><div class=related><h3>Similar articles:</h3><ul><li><a href=/blog/2014/08/26/devstep-development-environments-powered-by-docker-and-buildpacks/>Devstep: Development environments powered by Docker and Buildpacks</a></li><li><a href=/blog/2013/10/13/ventriloquist-demo/>Ventriloquist demo</a></li><li><a href=/blog/2013/09/11/announcing-ventriloquist/>Announcing Ventriloquist</a></li></ul></div></div></div></section><script src=/js/copycode.js></script><section class=section><div class=container><aside><div id=disqus_thread></div></aside><div id=show_comments><a id=load_comments class="button is-link">Load comments</a></div><script type=text/javascript>var disqus_shortname="fgrehm",hash;function disqus(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}hash=window.location.hash.substr(1),hash.length>8&&hash.substring(0,8)==="comment-"?(disqus(),document.getElementById("show_comments").style.display="none"):document.getElementById("load_comments").onclick=function(){disqus(),document.getElementById("show_comments").style.display="none"}</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></section><section class=section><div class="container has-text-centered"><p>&copy; <a href=https://github.com/fgrehm>Fabio Rehm</a> 2013-2022</p><p>Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/ribice/kiss>Kiss</a>.</p></div></section><script async src="https://www.googletagmanager.com/gtag/js?id=G-Z78MGSF72P"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Z78MGSF72P",{anonymize_ip:!1})}</script></body></html>